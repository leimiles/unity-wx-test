# Unity å¾®ä¿¡å°æ¸¸æˆé¡¹ç›®

## ğŸ“‹ å·¥ç¨‹ç›®çš„

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäº Unity å¼•æ“å¼€å‘çš„å¾®ä¿¡å°æ¸¸æˆé¡¹ç›®ï¼Œä½¿ç”¨å¾®ä¿¡ WASM SDK V2 è¿›è¡Œå°æ¸¸æˆé€‚é…ã€‚é¡¹ç›®é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œé›†æˆäº† YooAsset èµ„æºç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒ WebGL å¹³å°æ„å»ºå’Œéƒ¨ç½²ã€‚

## ğŸ—ï¸ ä¸»è¦ä»£ç ä½ç½®å’Œä½œç”¨

### æ ¸å¿ƒç³»ç»Ÿ

#### `Assets/Runtime/Boot/` - å¯åŠ¨ç³»ç»Ÿ
- **Bootstrap.cs**: æ¸¸æˆå¯åŠ¨å…¥å£ï¼Œè´Ÿè´£åˆå§‹åŒ–æ‰€æœ‰å­ç³»ç»Ÿ
- **BootstrapEvents.cs**: å¯åŠ¨ç›¸å…³äº‹ä»¶å®šä¹‰
- **BootProgressMapper.cs**: å¯åŠ¨è¿›åº¦æ˜ å°„å™¨

#### `Assets/Runtime/GameManager/` - æ¸¸æˆç®¡ç†å™¨
- **GameManager.cs**: æ¸¸æˆä¸»ç®¡ç†å™¨ï¼Œè´Ÿè´£æ¸¸æˆæµç¨‹æ§åˆ¶å’Œå­ç³»ç»Ÿç”Ÿå‘½å‘¨æœŸç®¡ç†
- **GameServices.cs**: æ¸¸æˆæœåŠ¡å®¹å™¨ï¼Œæä¾›ä¾èµ–æ³¨å…¥åŠŸèƒ½

#### `Assets/Runtime/YooUtils/` - èµ„æºç®¡ç†ç³»ç»Ÿ
- **YooService.cs**: YooAsset èµ„æºç®¡ç†æœåŠ¡å°è£…ï¼Œæä¾›èµ„æºåŠ è½½ã€åœºæ™¯åŠ è½½ã€èµ„æºä¸‹è½½ç­‰åŠŸèƒ½
- æ”¯æŒå¼‚æ­¥èµ„æºåŠ è½½ã€èµ„æºé¢„åŠ è½½ã€èµ„æºé‡Šæ”¾ç­‰å®Œæ•´ç”Ÿå‘½å‘¨æœŸç®¡ç†

#### `Assets/Runtime/EventBus/` - äº‹ä»¶æ€»çº¿
- **EventBus.cs**: å…¨å±€äº‹ä»¶æ€»çº¿ç³»ç»Ÿ
- **EventBinding.cs**: äº‹ä»¶ç»‘å®šå°è£…
- **Events.cs**: é¢„å®šä¹‰äº‹ä»¶ç±»å‹

#### `Assets/Runtime/Flow/` - æ¸¸æˆæµç¨‹ç®¡ç†
- **FlowFactory.cs**: æµç¨‹å·¥å‚ï¼Œè´Ÿè´£åˆ›å»ºä¸åŒçš„æ¸¸æˆæµç¨‹
- **IGameFlow.cs**: æ¸¸æˆæµç¨‹æ¥å£
- **FlowID.cs**: æµç¨‹IDæšä¸¾
- **TestSceneFlow.cs**: æµ‹è¯•åœºæ™¯æµç¨‹ç¤ºä¾‹

#### `Assets/Runtime/GameScene/` - åœºæ™¯ç®¡ç†
- **GameSceneService.cs**: åœºæ™¯æœåŠ¡ï¼Œè´Ÿè´£åœºæ™¯åŠ è½½å’Œåˆ‡æ¢
- **GameSceneSubSystem.cs**: åœºæ™¯ç®¡ç†å­ç³»ç»Ÿ

#### `Assets/Runtime/GameWorld/` - æ¸¸æˆä¸–ç•Œ
- **GameWorldService.cs**: æ¸¸æˆä¸–ç•ŒæœåŠ¡
- **GameWorldSubSystem.cs**: æ¸¸æˆä¸–ç•Œå­ç³»ç»Ÿ
- **IGameWorld.cs**: æ¸¸æˆä¸–ç•Œæ¥å£

#### `Assets/Runtime/SubSystem/` - å­ç³»ç»Ÿæ¡†æ¶
- å®šä¹‰äº† `ISubSystem` æ¥å£å’Œå­ç³»ç»ŸåŸºç±»
- æ”¯æŒ Required å’Œ Optional ä¸¤ç§ç±»å‹çš„å­ç³»ç»Ÿ
- æ”¯æŒä¼˜å…ˆçº§æ’åºå’Œè¶…æ—¶æ§åˆ¶

### åŠŸèƒ½æ¨¡å—

#### `Assets/Runtime/UI/` - UI ç³»ç»Ÿ
- **BootUI.cs**: å¯åŠ¨ç•Œé¢UI

#### `Assets/Runtime/Input/` - è¾“å…¥ç³»ç»Ÿ
- **GestureInput.cs**: æ‰‹åŠ¿è¾“å…¥å¤„ç†
- æ”¯æŒ Unity Input System

#### `Assets/Runtime/ModularsCharacter/` - æ¨¡å—åŒ–è§’è‰²ç³»ç»Ÿ
- æ”¯æŒè§’è‰²éƒ¨ä»¶çš„æ¨¡å—åŒ–ç»„è£…å’Œç®¡ç†

#### `Assets/Runtime/Player3C/` - ç¬¬ä¸‰äººç§°æ§åˆ¶
- ç¬¬ä¸‰äººç§°è§’è‰²æ§åˆ¶æœåŠ¡

#### `Assets/Runtime/ParticleBudget/` - ç²’å­é¢„ç®—ç³»ç»Ÿ
- å…¨å±€ç²’å­æ•ˆæœé¢„ç®—ç®¡ç†

#### `Assets/Runtime/Perf/` - æ€§èƒ½å·¥å…·
- æ€§èƒ½æµ‹è¯•å’Œå‹åŠ›æµ‹è¯•å·¥å…·

### å¾®ä¿¡ SDK

#### `Assets/WX-WASM-SDK-V2/` - å¾®ä¿¡ WASM SDK
- å¾®ä¿¡å°æ¸¸æˆ WebAssembly SDK V2
- æä¾›å¾®ä¿¡å¹³å° API å°è£…
- æ”¯æŒå¾®ä¿¡å°æ¸¸æˆç¯å¢ƒé€‚é…

### æœåŠ¡å™¨ç«¯

#### `Server/` - WebGL è¿è¡ŒæœåŠ¡å™¨
- ç”¨äºæœ¬åœ°å¼€å‘å’Œæµ‹è¯• WebGL æ„å»ºç‰ˆæœ¬
- æ”¯æŒ Docker éƒ¨ç½²
- è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ `Server/README.md`

## ğŸ¨ ç¾æœ¯èµ„æºä½ç½®

### `Assets/Arts/` - ä¸»è¦ç¾æœ¯èµ„æºç›®å½•

- **AllIn1VfxToolkit/**: VFX ç‰¹æ•ˆå·¥å…·åŒ…èµ„æº
  - ç²’å­ç‰¹æ•ˆé¢„è®¾å’Œæè´¨
  - æ¼”ç¤ºåœºæ™¯å’Œèµ„æº
  
- **Dino/**: æé¾™ä¸»é¢˜æ¸¸æˆèµ„æº
  - **DinoArtCharacter/**: è§’è‰²æ¨¡å‹å’Œè´´å›¾
  - **Envs/**: ç¯å¢ƒåœºæ™¯èµ„æº
  - åœºæ™¯æ–‡ä»¶ï¼š`Dino.unity`, `Dino_IOS.unity`
  
- **Dino_Re/**: æé¾™ä¸»é¢˜èµ„æºï¼ˆé‡æ„ç‰ˆï¼‰
  - è§’è‰²å’ŒåŠ¨ç”»èµ„æº
  
- **ModularGameUIKit/**: æ¨¡å—åŒ–æ¸¸æˆ UI å·¥å…·åŒ…
  - UI é¢„åˆ¶ä½“å’Œé€šç”¨èµ„æº
  
- **Sausages/**: é¦™è‚ ä¸»é¢˜èµ„æº
  - è§’è‰²ã€åŠ¨ç”»å’Œåœºæ™¯èµ„æº
  
- **Nav/**: å¯¼èˆªç›¸å…³èµ„æº
  - å¯¼èˆªç½‘æ ¼å’Œæµ‹è¯•åœºæ™¯
  
- **Procedural/**: ç¨‹åºåŒ–ç”Ÿæˆèµ„æº
  - ç¨‹åºåŒ–ç”Ÿæˆçš„æ¨¡å‹å’Œæè´¨
  
- **UI/**: UI é¢„åˆ¶ä½“èµ„æº
  - é€šç”¨ UI ç»„ä»¶

## ğŸ¬ ä¸»è¦åœºæ™¯ä½ç½®

### `Assets/Scenes/` - åœºæ™¯æ–‡ä»¶ç›®å½•

- **Game/Bootstrap.unity**: æ¸¸æˆå¯åŠ¨åœºæ™¯ï¼ˆåŒ…å« Bootstrap ç»„ä»¶ï¼‰
- **Game/Main.unity**: ä¸»æ¸¸æˆåœºæ™¯
- **Init.unity**: åˆå§‹åŒ–åœºæ™¯
- **Mini-Init.unity**: å°æ¸¸æˆåˆå§‹åŒ–åœºæ™¯
- **MemoTest.unity**: å†…å­˜æµ‹è¯•åœºæ™¯
- **Projects.unity**: é¡¹ç›®å±•ç¤ºåœºæ™¯
- **Sausage-Man.unity**: é¦™è‚ äººæ¸¸æˆåœºæ™¯

## ğŸ“¦ åº”ç”¨çš„ç¬¬ä¸‰æ–¹åŒ…

### Unity å®˜æ–¹åŒ…

- **com.unity.render-pipelines.universal** (14.0.12): URP æ¸²æŸ“ç®¡çº¿
- **com.unity.inputsystem** (1.14.2): æ–°è¾“å…¥ç³»ç»Ÿ
- **com.unity.textmeshpro** (3.0.9): æ–‡æœ¬æ¸²æŸ“
- **com.unity.ai.navigation** (1.1.7): AI å¯¼èˆªç³»ç»Ÿ
- **com.unity.animation.rigging** (1.2.1): åŠ¨ç”»ç»‘å®š
- **com.unity.cloud.gltfast** (6.14.1): GLTF å¿«é€ŸåŠ è½½
- **com.unity.memoryprofiler** (1.1.9): å†…å­˜åˆ†æå™¨
- **com.unity.performance.profile-analyzer** (1.2.4): æ€§èƒ½åˆ†æå™¨

### ç¬¬ä¸‰æ–¹æ¡†æ¶

- **com.cysharp.unitask**: UniTask å¼‚æ­¥ä»»åŠ¡æ¡†æ¶
- **com.tuyoogame.yooasset** (2.3.18): YooAsset èµ„æºç®¡ç†ç³»ç»Ÿ
- **cn.unity.uos.cdn**: UOS CDN SDK
- **cn.unity.uos.launcher**: UOS å¯åŠ¨å™¨

### å¼€å‘å·¥å…·

- **com.unity.ide.visualstudio** (2.0.22): Visual Studio é›†æˆ
- **com.unity.ide.vscode** (1.2.5): VS Code é›†æˆ
- **com.unity.collab-proxy** (2.7.1): Unity Collaborate
- **com.unity.test-framework** (1.1.33): æµ‹è¯•æ¡†æ¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- Unity 2022.3 LTS æˆ–æ›´é«˜ç‰ˆæœ¬
- Node.js 16+ (ç”¨äºæœåŠ¡å™¨ç«¯)
- å¾®ä¿¡å¼€å‘è€…å·¥å…· (ç”¨äºå°æ¸¸æˆè°ƒè¯•)

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd unity-wx-test
```

### 2. æ‰“å¼€ Unity é¡¹ç›®

1. ä½¿ç”¨ Unity Hub æ‰“å¼€é¡¹ç›®
2. ç­‰å¾… Unity å¯¼å…¥æ‰€æœ‰èµ„æºå’Œä¾èµ–åŒ…
3. ç¡®ä¿æ‰€æœ‰åŒ…éƒ½å·²æ­£ç¡®å¯¼å…¥ï¼ˆæ£€æŸ¥ Package Managerï¼‰

### 3. é…ç½®é¡¹ç›®

1. **é…ç½®å¯åŠ¨åœºæ™¯**ï¼š
   - æ‰“å¼€ `Assets/Scenes/Game/Bootstrap.unity`
   - ç¡®ä¿åœºæ™¯ä¸­åŒ…å« `Bootstrap` ç»„ä»¶
   - é…ç½® `BootstrapConfigs` èµ„æº

2. **é…ç½® YooAsset**ï¼š
   - åœ¨ Project Settings ä¸­é…ç½® YooAsset è®¾ç½®
   - è®¾ç½®èµ„æºåŒ…è·¯å¾„å’Œä¸‹è½½åœ°å€

3. **é…ç½®å¾®ä¿¡ SDK**ï¼š
   - åœ¨ `Assets/Settings/WXBuildSettings.asset` ä¸­é…ç½®å¾®ä¿¡å°æ¸¸æˆç›¸å…³è®¾ç½®
   - è®¾ç½® AppID å’Œæ„å»ºå‚æ•°

### 4. è¿è¡Œé¡¹ç›®

#### åœ¨ Unity Editor ä¸­è¿è¡Œ

1. æ‰“å¼€ `Assets/Scenes/Game/Bootstrap.unity` åœºæ™¯
2. ç‚¹å‡» Play æŒ‰é’®è¿è¡Œ
3. è§‚å¯Ÿ Console æ—¥å¿—ï¼Œç¡®è®¤æ‰€æœ‰å­ç³»ç»Ÿåˆå§‹åŒ–æˆåŠŸ

#### æ„å»º WebGL ç‰ˆæœ¬

1. é€‰æ‹© `File > Build Settings`
2. é€‰æ‹© WebGL å¹³å°
3. ç‚¹å‡» `Switch Platform`ï¼ˆå¦‚éœ€è¦ï¼‰
4. é…ç½®æ„å»ºè®¾ç½®ï¼š
   - é€‰æ‹©å¾®ä¿¡æ¨¡æ¿ï¼š`WXTemplate` æˆ– `WXTemplate2020`
   - é…ç½®å‹ç¼©æ ¼å¼å’Œä¼˜åŒ–é€‰é¡¹
5. ç‚¹å‡» `Build` æˆ– `Build And Run`

#### æœ¬åœ°æµ‹è¯• WebGL æ„å»º

1. æ„å»ºå®Œæˆåï¼Œè¿›å…¥ `Server/` ç›®å½•
2. å®‰è£…ä¾èµ–ï¼š
   ```bash
   cd Server
   npm install
   ```
3. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰ï¼š
   ```bash
   cp config.example.env .env
   # ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½® WEBGL_BUILD_PATH
   ```
4. å¯åŠ¨æœåŠ¡å™¨ï¼š
   ```bash
   npm start
   ```
5. åœ¨æµè§ˆå™¨ä¸­è®¿é—® `http://localhost:3000`

#### éƒ¨ç½²åˆ°å¾®ä¿¡å°æ¸¸æˆ

1. ä½¿ç”¨ Unity æ„å»º WebGL ç‰ˆæœ¬ï¼ˆé€‰æ‹©å¾®ä¿¡æ¨¡æ¿ï¼‰
2. ä½¿ç”¨å¾®ä¿¡å¼€å‘è€…å·¥å…·æ‰“å¼€æ„å»ºè¾“å‡ºç›®å½•
3. é…ç½®å°æ¸¸æˆ AppID
4. ä¸Šä¼ ä»£ç å¹¶æäº¤å®¡æ ¸

### 5. é¡¹ç›®ç»“æ„è¯´æ˜

```
unity-wx-test/
â”œâ”€â”€ Assets/
â”‚   â”œâ”€â”€ Runtime/          # è¿è¡Œæ—¶æ ¸å¿ƒä»£ç 
â”‚   â”œâ”€â”€ Arts/              # ç¾æœ¯èµ„æº
â”‚   â”œâ”€â”€ Scenes/            # åœºæ™¯æ–‡ä»¶
â”‚   â”œâ”€â”€ WX-WASM-SDK-V2/    # å¾®ä¿¡ SDK
â”‚   â”œâ”€â”€ WebGLTemplates/    # WebGL æ¨¡æ¿
â”‚   â””â”€â”€ Resources/         # Resources èµ„æº
â”œâ”€â”€ Server/                # WebGL æœåŠ¡å™¨
â”œâ”€â”€ Builds/                # æ„å»ºè¾“å‡ºç›®å½•
â””â”€â”€ Bundles/               # èµ„æºåŒ…ç›®å½•
```

### 6. å¸¸è§é—®é¢˜

#### èµ„æºåŠ è½½å¤±è´¥
- æ£€æŸ¥ YooAsset é…ç½®æ˜¯å¦æ­£ç¡®
- ç¡®è®¤èµ„æºåŒ…è·¯å¾„å’Œä¸‹è½½åœ°å€é…ç½®æ­£ç¡®
- æŸ¥çœ‹ Console æ—¥å¿—ä¸­çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯

#### å¾®ä¿¡ SDK åˆå§‹åŒ–å¤±è´¥
- ç¡®è®¤åœ¨å¾®ä¿¡å¼€å‘è€…å·¥å…·ä¸­è¿è¡Œ
- æ£€æŸ¥ `WXBuildSettings` é…ç½®
- æŸ¥çœ‹å¾®ä¿¡å¼€å‘è€…å·¥å…·çš„ Console æ—¥å¿—

#### å­ç³»ç»Ÿåˆå§‹åŒ–è¶…æ—¶
- æ£€æŸ¥ç½‘ç»œè¿æ¥ï¼ˆå¦‚æœæ¶‰åŠèµ„æºä¸‹è½½ï¼‰
- æŸ¥çœ‹ `Bootstrap.cs` ä¸­çš„è¶…æ—¶é…ç½®
- æŸ¥çœ‹å…·ä½“å­ç³»ç»Ÿçš„åˆå§‹åŒ–æ—¥å¿—

## ğŸ“ å¼€å‘è§„èŒƒ

- ä½¿ç”¨ UniTask è¿›è¡Œå¼‚æ­¥æ“ä½œ
- é€šè¿‡ EventBus è¿›è¡Œç³»ç»Ÿé—´é€šä¿¡
- éµå¾ªå­ç³»ç»Ÿæ¶æ„æ¨¡å¼
- ä½¿ç”¨ YooAsset è¿›è¡Œèµ„æºç®¡ç†

## ğŸ“„ è®¸å¯è¯

[æ ¹æ®å®é™…æƒ…å†µå¡«å†™]

## ğŸ‘¥ è´¡çŒ®

[æ ¹æ®å®é™…æƒ…å†µå¡«å†™]
